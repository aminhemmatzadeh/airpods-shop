<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0c0c0c" />
  <title>فروشگاه تخصصی ایرپاد</title>
  <style>
.neon-btn {
  background: none;
  border: none;
  color: #fff; /* رنگ پایه  سفید */
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  text-shadow: 0 0 5px #fff,
               0 0 10px #0ff,
               0 0 20px #0ff,
               0 0 40px #0ff;
  animation: neonFlash 1.5s infinite alternate;
}

@keyframes neonFlash {
  0% {
    text-shadow: 0 0 5px #fff,
                 0 0 10px #0ff,
                 0 0 20px #0ff,
                 0 0 40px #0ff;
    color: #0ff;
  }
  100% {
    text-shadow: 0 0 2px #fff,
                 0 0 5px #f0f,
                 0 0 10px #f0f,
                 0 0 20px #f0f;
    color: #f0f;
  }
}

    :root{
      --bg:#000;
      --panel:#151515;
      --panel2:#1e1e1e;
      --text:#fff;
      --muted:#9aa0a6;
      --accent:#ff1744; /* قرمز برای موارد مهم */
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Tahoma, sans-serif;
      background:var(--bg);
      color:var(--text);
      padding-bottom:70px; /* برای دیده شدن نوار پایین */
    }
    .sr-only{
      position:absolute !important;
      width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;
    }

    /* ====== هدر بالا ====== */
    header{
      position:sticky; top:0; z-index:1000;
      background:#0c0c0c; border-bottom:1px solid #222;
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 16px;
    }
    .icons-left,.icons-right{display:flex; gap:14px; align-items:center}
    .icon-btn{
      background:var(--panel); border:1px solid #222; color:#fff;
      width:36px; height:36px; border-radius:8px;
      display:flex; align-items:center; justify-content:center;
      cursor:pointer; user-select:none;
    }
    .icon-btn:active{transform:scale(.97)}
/* [GPT PATCH] دکمه ورود با گوگل */
.google-btn{
  display:flex; align-items:center; justify-content:center; gap:8px;
  background:#fff !important; color:#000 !important; font-weight:700;
  border-radius:10px;
}
.google-btn img{ width:18px; height:18px; border-radius:50%; background:#fff; }
.google-sep{ text-align:center; margin:12px 0; color:#aaa; font-size:13px; }

    /* ====== منوی همبرگری ====== */
.icons-right{ position:relative; } /* اضافه کن تا منو به همین کانتینر سنجاق بشه */

.menu{
  position:absolute;
  left:10px;         /* ✅ به جای right */
  right:auto;        /* ✅ مطمئن شو از راست قفل نیست */
  top:58px;
  width:240px; background:var(--panel2); border:1px solid #2a2a2a;
  border-radius:10px; display:none; overflow:hidden;
  box-shadow:0 10px 30px rgba(0,0,0,.5);
}

    .menu a, .menu .disabled, .menu button{
      display:block; width:100%; text-align:right;
      padding:12px 14px; color:#fff; text-decoration:none;
      border-bottom:1px solid #262626; background:none; outline:none; border:none;
      cursor:pointer; font:inherit;
    }
    .menu a:hover, .menu button:hover{background:#202020}
    .menu .disabled{color:var(--muted); cursor:default; pointer-events:none}
    .submenu{display:none; background:#161616}
    .submenu a{border-bottom:1px solid #1f1f1f}

    /* ====== قهرمان/بنر مقایسه ====== */
    .compare-box{
      margin:18px; padding:22px; text-align:center;
      background:linear-gradient(135deg,#1b1b1b,#111);
      border:1px solid #232323; border-radius:14px; cursor:pointer;
    }
    .compare-box b{color:var(--accent)}
    .compare-box:hover{outline:2px solid var(--accent)}

    /* کمک‌استایل برای کادر دوخطی پایین */
    .compare-box--stack{display:flex; flex-direction:column; gap:6px; align-items:center; text-align:center;}
    .compare-title{font-size:clamp(18px,3.8vw,24px); font-weight:900;}
    .compare-sub{font-size:clamp(13px,2.8vw,16px); font-weight:600; color:#fff; opacity:.95;}

    /* ====== دسته‌بندی‌ها ====== */
    .categories{
      display:grid; gap:14px; padding:16px;
      grid-template-columns:repeat(2,1fr);
    }
    .category{
      background:var(--panel); border:1px solid #242424; border-radius:12px;
      overflow:hidden; cursor:pointer; transition:transform .2s;
      text-align:center;
    }
    .category:hover{transform:translateY(-2px)}
    .category img{width:100%; height:140px; object-fit:cover; display:block}
    .category p{margin:10px 0 12px; font-size:14px}

    /* ====== اسلایدر ====== */
    .section-title{margin:8px 16px 0; color:#e0e0e0}
    .slider{
      display:flex; gap:12px; overflow-x:auto; padding:14px 16px 8px;
      scroll-snap-type:x proximity;
    }
    .card{
      min-width:160px; background:var(--panel);
      border:1px solid #242424; border-radius:12px; padding:10px;
      scroll-snap-align:start; text-align:center;
    }
    .card img{width:100%; height:120px; object-fit:cover; border-radius:8px}
    .price{color:var(--accent); font-size:13px; margin:6px 0; font-weight:700;} /* همه قیمت‌ها قرمز */

    /* ====== اطلاعیه ====== */
    .notice{
      margin:14px 16px; background:var(--panel); border:1px solid #242424;
      border-radius:12px; padding:14px; text-align:center;
    }
    .notice .tag{color:var(--accent); font-weight:700}

    /* ====== گرید ====== */
    .grid{
      display:grid; gap:12px; padding:14px 16px;
      grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
    }
    .grid .card img{height:140px}

    /* ====== نوار پایین ====== */
    .bottom-nav{
      position:fixed; bottom:0; left:0; width:100%;
      background:#0c0c0c; border-top:1px solid #222;
      display:flex; justify-content:space-around; align-items:center;
      padding:8px 0; z-index:1000;
    }
    .bottom-nav button, .bottom-nav a{
      background:none; border:none; color:#fff; text-decoration:none;
      font:inherit; display:flex; flex-direction:column; align-items:center;
      gap:4px; cursor:pointer;
      position:relative; /* برای نشان سبد خرید */
    }
    .bottom-nav .lbl{font-size:12px; color:#ddd}

    /* نشان تعداد سبد خرید (Badge) */
    .badge{
      position:absolute; top:-2px; right:22px;
      transform:translate(50%,-30%);
      min-width:18px; height:18px;
      padding:0 5px;
      border-radius:10px;
      background:var(--accent);
      color:#fff; font-size:11px; line-height:18px;
      display:flex; align-items:center; justify-content:center;
      border:1px solid #222;
    }

    /* ====== شیت دسته‌بندی ====== */
    .sheet{
      position:fixed; inset:auto 0 64px 0; margin:auto; width:100%;
      display:none; z-index:999;
    }
    .sheet .inner{
      margin:0 16px; background:var(--panel2); border:1px solid #252525;
      border-radius:12px; padding:12px;
    }
    .chip-wrap{display:grid; gap:10px; grid-template-columns:repeat(2,1fr)}
    .chip{
      background:#1a1a1a; border:1px solid #2a2a2a; color:#fff;
      padding:10px 12px; border-radius:10px; text-align:center; cursor:pointer;
    }
    .chip:hover{outline:2px solid var(--accent)}
    .sheet-close{margin-top:8px; width:100%; background:#1a1a1a; border:1px solid #2a2a2a; color:#fff; padding:10px; border-radius:10px; cursor:pointer}

    /* ====== اُورلی/مودال عمومی ====== */
    .overlay{
      position:fixed; inset:0; background:rgba(0,0,0,.6);
      display:none; align-items:center; justify-content:center; z-index:1200;
    }
    .modal{
      width:min(420px,92vw); background:var(--panel2); border:1px solid #2a2a2a;
      border-radius:12px; padding:16px;
      max-height:90vh; overflow:auto;
    }

    /* برای جای‌گذاری دکمه × داخل همه پنل‌ها */
    .modal, .store-panel, .category-modal .inner, .product-modal .inner { position:relative; }

    /* ===== دکمه ضربدر قرمز (×) ===== */
    .modal-x{
      position:absolute; left:12px; top:12px; z-index:10;
      width:36px; height:36px; border-radius:10px;
      border:1px solid #2a2a2a; background:#141414; color:var(--accent);
      display:flex; align-items:center; justify-content:center; cursor:pointer;
      font-size:20px; line-height:1; font-weight:700;
    }
    .modal-x:hover{ background:#1c1c1c; }

    .modal h3{margin:0 0 10px}
    .field{display:flex; flex-direction:column; gap:6px; margin:8px 0}
    .field input, .field select, .field textarea{
      background:#101010; border:1px solid #2a2a2a; color:#fff;
      border-radius:8px; padding:10px;
    }
    .btn{
      background:var(--accent); border:none; color:#fff; padding:10px 14px;
      border-radius:10px; cursor:pointer; width:100%; margin-top:8px;
    }

    /* ====== سکشن لینک‌های تماس (بالای فوتر) ====== */
    .contact-links{
      background:#0c0c0c;
      border-top:1px solid #222;
      border-bottom:1px solid #222;
      padding:12px;
      text-align:center;
      margin-top:40px;
    }
    .contact-links .footer-links a{
      color:#fff;
      text-decoration:none;
      margin:0 10px;
      font-size:14px;
    }
    .contact-links .footer-links a:hover{
      color:var(--accent);
    }

    /* ====== فوتر جمع‌وجور ====== */
    .site-footer{
      background:#0c0c0c;
      border-top:1px solid #222;
      padding:10px 12px 14px;
      text-align:center;
      margin-top:0;
    }
    .site-footer .signature{
      color:#bbb;
      font:13px/1.6 sans-serif;
      margin-bottom:4px;
    }
    .site-footer .footer-logo{
      width:115px;
      height:auto;
      display:inline-block;
    }

    /* ====== مودال دسته‌بندی ====== */
    .category-modal{
      position:fixed; inset:0;
      background:rgba(0,0,0,.7);
      display:none; justify-content:center; align-items:center;
      z-index:2000;
    }
    .category-modal .inner{
      width:min(800px,90%);
      max-height:90vh;
      background:var(--panel2);
      border:1px solid #2a2a2a;
      border-radius:14px;
      padding:16px;
      overflow-y:auto;
    }
    .category-modal h2{
      margin-top:0; color:var(--accent); text-align:center;
    }
    .category-products{
      display:grid; gap:14px;
      grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
    }
    .category-products .card{
      cursor:pointer;
      transition:transform .2s;
    }
    .category-products .card:hover{
      transform:scale(1.05);
    }
    .cat-close{
      margin-top:14px;
      width:100%;
      background:#1a1a1a;
      border:1px solid #2a2a2a;
      color:#fff;
      padding:10px;
      border-radius:10px;
      cursor:pointer;
    }

    /* ===== مودال جزئیات محصول ===== */
    .product-modal{
      position:fixed; inset:0;
      background:rgba(0,0,0,.7);
      display:none; justify-content:center; align-items:center;
      z-index:2100;
    }
    .product-modal .inner{
      width:min(500px,90%);
      max-height:90vh;
      background:var(--panel2);
      border:1px solid #2a2a2a;
      border-radius:14px;
      padding:16px;
      overflow-y:auto;
      text-align:center;
    }
    .product-modal img{
      width:100%; max-height:250px; object-fit:contain;
      border-radius:12px; margin-bottom:12px;
    }
    .product-modal h3{margin:0 0 8px}
    .product-modal .price{
      font-size:16px; color:var(--accent); margin-bottom:12px;
    }
    .product-modal .desc{
      font-size:14px; line-height:1.6; color:#ddd; margin-bottom:16px;
    }
    .add-cart{
      background:var(--accent);
      border:none; color:#fff;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      width:100%;
      font-size:15px;
    }

    /* ====== سبد خرید: استایل صفحه نمایشی ====== */
    .cart-list{
      display:flex; flex-direction:column; gap:10px; margin:12px 0;
      max-height:50vh; overflow:auto;
    }
    .cart-item{
      display:flex; align-items:center; gap:10px;
      background:var(--panel); border:1px solid #242424;
      border-radius:10px; padding:10px;
    }
    .cart-thumb{width:56px; height:56px; border-radius:8px; object-fit:cover; border:1px solid #333}
    .ci-main{flex:1}
    .ci-name{font-weight:700}
    .ci-price{color:var(--accent); font-size:13px; margin-top:4px}
    .ci-qty{display:inline-flex; align-items:center; gap:8px; margin-top:8px}
    .qty-btn{
      width:28px; height:28px; border-radius:8px; cursor:pointer;
      background:#1a1a1a; border:1px solid #2a2a2a; color:#fff;
    }
    .remove-btn{
      background:none; border:1px solid #2a2a2a; color:#fff;
      border-radius:8px; padding:6px 8px; cursor:pointer;
    }
    .cart-footer{margin-top:8px; display:flex; flex-direction:column; gap:8px}
    .cart-total{background:#101010; border:1px solid #2a2a2a; padding:10px; border-radius:10px; text-align:center}
    .cart-total b{color:var(--accent)}

    /* ====== صفحه فروشگاه (اُورلی اختصاصی) ====== */
    .store-panel{
      width:min(1100px,94vw);
      background:var(--panel2);
      border:1px solid #2a2a2a;
      border-radius:14px;
      padding:16px;
      max-height:90vh;
      overflow:auto;
    }
    .store-title{
      margin:0 0 8px;
      color:var(--accent);
      text-align:center;
    }
    .store-subinfo{
      text-align:center; color:#bbb; font-size:13px; margin-bottom:8px;
    }
    .store-grid{
      display:grid; gap:14px;
      grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
    }
    .store-grid .card{ position:relative; }
    .store-grid .price{ color:var(--accent); font-weight:700; }
    .mini-add{
  position:absolute; 
  top:8px; 
  right:8px;   /* بالای راست */
  width:32px; 
  height:32px;
  border-radius:8px;   /* مربع با گوشه گرد */
  background:var(--accent); 
  color:#fff; 
  border:none; 
  cursor:pointer;
  font-size:18px; 

  display:flex;           /* فلکس فعال */
  align-items:center;     /* عمودی وسط */
  justify-content:center; /* افقی وسط */
}


    /* ====== Checkout Wizard ====== */
    #checkoutOv{ z-index:2300; }
    .steps{
      display:flex; gap:8px; justify-content:center; margin:0 0 10px;
      flex-wrap:wrap;
    }
    .step-dot{
      padding:6px 10px; border:1px solid #2a2a2a; border-radius:20px;
      font-size:12px; background:#131313; color:#ccc;
    }
    .step-dot.active{ background:var(--accent); color:#fff; border-color:#b0122a; }
    .step{ display:none; }
    .step.visible{ display:block; }
    .row{display:grid; gap:8px; grid-template-columns:1fr 1fr;}
    .row .field{margin:0}
    .radio-group{display:grid; gap:8px}
    .radio-item{display:flex; gap:8px; align-items:center; padding:10px; background:#101010; border:1px solid #2a2a2a; border-radius:10px; cursor:pointer}
    .radio-item input{accent-color:#ff1744}
    .step-actions{display:flex; gap:8px; margin-top:10px}
    .step-actions .btn{flex:1}
    .muted{color:#aaa; font-size:12px}

    /* ==== Rainbow Border (فقط فریم دور کادر) ==== */
    .compare-box,
    .category,
    .notice,
    .card {
      position: relative;
      border: 2px solid transparent;
      border-radius: 12px;
      isolation: isolate;
    }
    .compare-box::before,
    .category::before,
    .notice::before,
    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      padding: 2px;
      background: linear-gradient(
        135deg,
        #ff1744,
        #ff4081,
        #ffea00,
        #00e676,
        #2979ff,
        #d500f9,
        #ff1744
      );
      background-size: 400% 400%;
      animation: rainbowBorder 6s linear infinite;
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
              mask-composite: exclude;
      pointer-events: none;
    }
    @keyframes rainbowBorder {
      0%   { background-position: 0% 50%; }
      50%  { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    @media (prefers-reduced-motion: reduce){
      .compare-box::before,
      .notice::before,
      .category::before,
      .card::before{ animation:none; }
    }
.site-footer {
  background: var(--panel);
  padding: 20px;
  text-align: center;
  color: var(--text);
  margin-top: 40px;
}

.footer-top {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-bottom: 20px;
}

.footer-social a {
  margin: 0 8px;
  font-size: 20px;
  color: var(--accent);
  transition: 0.3s;
}
.footer-social a:hover {
  color: #fff;
}

.footer-links {
  margin: 10px 0;
}
.footer-links a {
  margin: 0 10px;
  color: var(--accent);
  text-decoration: none;
}
.footer-links a:hover {
  text-decoration: underline;
}

.newsletter form {
  display: flex;
  justify-content: center;
  gap: 8px;
}
.newsletter input {
  padding: 6px 8px;
  border: none;
  border-radius: 5px;
  max-width: 200px;
}
.newsletter button {
  padding: 6px 12px;
  border: none;
  background: var(--accent);
  color: #000;
  border-radius: 5px;
  cursor: pointer;
}

.copyright {
  margin-top: 10px;
  font-size: 14px;
  opacity: 0.8;
}

.footer-bottom {
  margin-top: 15px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
}
.footer-logo {
  width: 50px;
  height: auto;
}
.credit {
  font-size: 10px;
  font-family: Tahoma, sans-serif;
}
/* گرید «همه محصولات»: افکت و کلیک‌پذیر */
.grid .card{ 
  cursor: pointer;
  transition: opacity .6s;
}
.grid .card.fade{ 
  opacity: 0;
}
/* [GPT PATCH] OTP Inputs */
.otp-boxes {
  display:flex;
  justify-content:center;
  gap:8px;
  margin:10px 0;
  direction:ltr;

}
.otp-input {
  width:38px;
  height:44px;
  text-align:center;
  font-size:18px;
  border:2px solid #444;
  border-radius:8px;
  background:#111;
  color:#fff;
  outline:none;
  transition:0.2s;
direction:ltr;
}
.otp-input:focus {
  border-color:#e50914;
  box-shadow:0 0 8px #e50914aa;
}

.otp-timer {
  margin-top:10px;
  font-size:14px;
  color:#ff5555;
  font-weight:600;
}

/* [GPT PATCH] منوی همبرگری از سمت چپ */
.sideMenu {
  position:fixed;
  top:0;
  left:0;   /* ✅ به جای right */
  width:260px;
  height:100%;
  background:var(--panel2);
  transform:translateX(-100%); /* ✅ اول مخفی بیرون سمت چپ */
  transition:0.3s;
  z-index:1000;
  padding-top:60px;
}
.sideMenu.active {
  transform:translateX(0); /* ✅ وقتی اکتیو شد وارد صفحه بشه */
}
.sideMenu a {
  display:block;
  padding:12px;
  color:#fff;
  text-decoration:none;
}
.sideMenu .closebtn {
  position:absolute;
  top:10px;
  right:10px;
  font-size:24px;
  background:none;
  border:none;
  color:#fff;
  cursor:pointer;
}
.highlight {
  color: #e50914; /* همون قرمز اصلی سایتت */
  font-weight: bold;
}
.site-footer hr {
  margin: 30px 0 20px 0;
}




  </style>
</head>
<body>

  <!-- live region برای اعلام رویدادها -->
  <div id="live" class="sr-only" aria-live="polite"></div>

  <!-- ===== هدر ===== -->
  <header>
    <div class="icons-left" role="group" aria-label="ابزارها">
      <button class="icon-btn" title="جستجو" aria-label="جستجو" onclick="toggleSearch()">🔍</button>
      <button class="icon-btn" title="حساب کاربری" aria-label="حساب کاربری" onclick="openAccount()">👤</button>
    </div>

    <div class="icons-right" role="group" aria-label="منو">
      <button class="icon-btn" title="منو" aria-haspopup="menu" aria-expanded="false" onclick="toggleMenu()">☰</button>
      <nav id="menu" class="menu" onclick="event.stopPropagation()" aria-label="منوی اصلی">
        <a href="#products" onclick="closeMenu()">مقایسه ایرپادها</a>
        <a href="#products" onclick="closeMenu()">خرید ایرپاد</a>

<li><a href="javascript:void(0)" id="openAbout">درباره ما</a></li>

        <button onclick="toggleContact()" aria-expanded="false">تماس با ما ▾</button>
        <div id="contactSub" class="submenu" aria-hidden="true">
          <a href="https://t.me/A_hzzzz" target="_blank" rel="noopener">📱 ارتباط در تلگرام (@A_hzzzz)</a>
          <a href="tel:+989379862560">📞 تماس: +989379862560</a>
          <!-- 🔴 لینک اینستاگرام -->
          <a id="igLink" href="https://instagram.com/Amin.hemmatzadeh" target="_blank" rel="noopener">📷 اینستاگرام (@Amin.hemmatzadeh)</a>
        </div>
      </nav>
    </div>
  </header>

  <!-- ===== کادر بالا دسته‌بندی‌ها ===== -->
  <div class="compare-box" onclick="openStore()">
    ایرپاد های <b>اورجینال</b> همراه با <b>اقساط ویژه</b> و ارسال <b>رایگان</b>
  </div>

  <!-- ===== دسته‌بندی‌های تصویری ===== -->
  <section class="categories" id="categories">
    <div id="cat-gaming" class="category" onclick="openCategory('gaming')">
      <img src="images/IMG_5024.jpeg" alt="ایرپادهای گیمینگ" loading="lazy">
      <p>ایرپادهای گیمینگ</p>
    </div>
    <div id="cat-samsung" class="category" onclick="openCategory('samsung')">
      <img src="images/IMG_5023.jpeg" alt="ایرپادهای سامسونگ" loading="lazy">
      <p>ایرپادهای سامسونگ</p>
    </div>
    <div id="cat-apple" class="category" onclick="openCategory('apple')">
      <img src="images/IMG_5022.jpeg" alt="ایرپادهای اپل" loading="lazy">
      <p>ایرپادهای اپل</p>
    </div>
    <div id="cat-xiaomi" class="category" onclick="openCategory('xiaomi')">
      <img src="images/IMG_5020.jpeg" alt="ایرپادهای شیائومی" loading="lazy">
      <p>ایرپادهای شیائومی</p>
    </div>
  </section>

  <!-- ===== کادر پایین دسته‌بندی‌ها ===== -->
  <div class="compare-box compare-box--stack" onclick="openStore()">
    <span class="compare-title"><b>شرایط ویژه</b></span>
    <span class="compare-sub">الان بخر ، دو ماه بعد قسطشو پرداخت کن</span>
  </div>
 <h3 class="section-title">محصولات منتخب</h3>
  <div id="products" class="slider">
    <div class="card">
      <img src="images/IMG_5022.jpeg" alt="AirPods Pro" loading="lazy">
      <div>AirPods Pro2</div>
      <div class="price">قیمت: 23,000,000 تومان</div>
    </div>
    <div class="card">
      <img src="images/IMG_5023.jpeg" alt="Galaxy Buds2 Pro" loading="lazy">
      <div>Galaxy Buds2 Pro</div>
      <div class="price">قیمت: 11,200,000 تومان</div>
    </div>
    <div class="card">
      <img src="images/IMG_5020.jpeg" alt="Xiaomi Buds" loading="lazy">
      <div>Xiaomi Buds 6</div>
      <div class="price">قیمت: 1,300,000 تومان</div>
    </div>
    <div class="card">
      <img src="images/IMG_5024.jpeg" alt="Gaming TWS" loading="lazy">
      <div>Gaming TWS U50</div>
      <div class="price">قیمت: 750,000 تومان</div>
    </div>
  </div>

<div class="notice">
  <div class="tag">پیشنهادهای ویژه</div>
<button onclick="openStore()" class="neon-btn"> "مشاهده "</button>

</div>

  <div class="notice">
    <div class="tag">
" تمامی ایرپادها اورجینال و با ضمانت هستند "</div>
  </div>

  <!-- ===== اسلایدر محصولات ===== -->
  <h3 class="section-title">همه محصولات</h3>
<section class="grid" aria-label="نمایش نمونه‌ای از محصولات"></section>

  <!-- ===== نوار پایین ====== -->
  <nav class="bottom-nav" aria-label="ناوبری پایین">
    <button onclick="window.scrollTo({top:0,behavior:'smooth'})" aria-label="خانه">🏠<span class="lbl">خانه</span></button>
    <button onclick="toggleSheet()" aria-expanded="false" aria-controls="sheet">📂<span class="lbl">دسته‌بندی‌ها</span></button>
    <button onclick="openStore()" aria-label="فروشگاه">🛒<span class="lbl">فروشگاه</span></button>
    <button onclick="openCart()" aria-label="سبد خرید">🛍️<span id="cartCount" class="badge">0</span><span class="lbl">سبد خرید</span></button>
    <button onclick="openAccount()" aria-label="حساب کاربری">👤<span class="lbl">حساب</span></button>
  </nav>

  <!-- ===== شیت دسته‌بندی پایین ===== -->
  <div id="sheet" class="sheet" onclick="toggleSheet()">
    <div class="inner" onclick="event.stopPropagation()">
      <div class="chip-wrap">
        <div class="chip" onclick="openCatFromSheet('gaming')">ایرپادهای گیمینگ</div>
        <div class="chip" onclick="openCatFromSheet('samsung')">ایرپادهای سامسونگ</div>
        <div class="chip" onclick="openCatFromSheet('apple')">ایرپادهای اپل</div>
        <div class="chip" onclick="openCatFromSheet('xiaomi')">ایرپادهای شیائومی</div>
      </div>
      <button class="sheet-close" onclick="toggleSheet()">بستن</button>
    </div>
  </div>

  <!-- ===== اُورلی جستجو ===== -->
  <div id="searchOv" class="overlay" onclick="closeSearch(event)">
    <div class="modal" onclick="event.stopPropagation()">
      <button class="modal-x" onclick="closeSearch()">×</button>
      <h3>جستجوی محصول</h3>
      <div class="field">
        <input id="searchQuery" type="search" placeholder="نام ایرپاد یا برند..." onkeydown="if(event.key==='Enter') applySearch()" inputmode="search" />
      </div>
      <button class="btn" onclick="applySearch()">جستجو</button>
    </div>
  </div>

  <!-- ===== اُورلی حساب ===== -->
  <div id="accountOv" class="overlay" onclick="closeAccount(event)">
    <div class="modal" onclick="event.stopPropagation()">
      <button class="modal-x" onclick="closeAccount()">×</button>
      <h3>ورود به حساب</h3>

      <div class="field">
        <label for="accPhone">شماره موبایل</label>
        <input id="accPhone" type="tel" placeholder="مثلاً 09xxxxxxxxx" />
      </div>
   <button class="btn" onclick="sendOTP()">ارسال رمز یکبار مصرف</button>
<!-- [GPT PATCH] فیلد کد تایید -->
<!-- [GPT PATCH] فیلد کد تایید شیک -->
<div id="otpSection" style="display:none; margin-top:20px; text-align:center;">
  <label style="display:block; margin-bottom:10px; font-size:14px; color:#ccc;">
    کد ۶ رقمی ارسال‌شده را وارد کنید
  </label>
  <div class="otp-boxes">
    <input type="tel" maxlength="1" class="otp-input" oninput="moveNext(this,0)">
    <input type="tel" maxlength="1" class="otp-input" oninput="moveNext(this,1)">
    <input type="tel" maxlength="1" class="otp-input" oninput="moveNext(this,2)">
    <input type="tel" maxlength="1" class="otp-input" oninput="moveNext(this,3)">
    <input type="tel" maxlength="1" class="otp-input" oninput="moveNext(this,4)">
    <input type="tel" maxlength="1" class="otp-input" oninput="moveNext(this,5)">
  </div>
  <div id="otpTimer" class="otp-timer"></div>
  <button class="btn" style="margin-top:12px;" onclick="verifyOTP()">تایید کد</button>
</div>


<div class="google-sep">یا</div>
<button class="btn google-btn" onclick="loginWithGoogle()">
  <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
  ورود با Google
</button>
<div style="text-align:center; margin-top:8px;">
  <a href="https://mail.google.com" target="_blank" rel="noopener" style="color:#9aa0a6; font-size:13px; text-decoration:none;">
    
  </a>
</div>

    </div>
  </div>

  <!-- ===== اُورلی فروشگاه: همه محصولات ===== -->
  <div id="storeOv" class="overlay" onclick="closeStore(event)">
    <div class="store-panel" onclick="event.stopPropagation()">
      <button class="modal-x" onclick="closeStore()">×</button>
      <h3 class="store-title">فروشگاه</h3>
      <div id="storeInfo" class="store-subinfo"></div>
      <div id="storeGrid" class="store-grid" role="list"></div>
      <button class="btn" style="background:#1a1a1a;border:1px solid #2a2a2a" onclick="closeStore()">بستن</button>
    </div>
  </div>

  <!-- ===== فوتر ===== --><footer class="site-footer">
  <div class="footer-top">
    <!-- شبکه‌های اجتماعی -->
    <div class="footer-social">
      <a href="https://t.me/A_hzzzz" target="_blank"><i class="fab fa-telegram-plane"></i></a>
      <a href="https://instagram.com/" target="_blank"><i class="fab fa-instagram"></i></a>
      <a href="https://wa.me/" target="_blank"><i class="fab fa-whatsapp"></i></a>
      <a href="https://twitter.com/" target="_blank"><i class="fab fa-twitter"></i></a>
    </div>

    <!-- لینک‌های سریع -->
    <nav class="footer-links">
      <a href="#">شرایط استفاده</a>
      <a href="#">حریم خصوصی</a>
      <a href="#">قوانین و مقررات</a>
      <a href="#">تماس با ما</a>
    </nav>

    <!-- خبرنامه -->
    <div class="newsletter">
      <p>عضویت در خبرنامه</p>
      <form>
        <input type="email" placeholder="ایمیل خود را وارد کنید">
        <button type="submit">ثبت</button>
      </form>
    </div>
  </div>

  <div class="copyright">
    <p>© 2025 همه حقوق این وب‌سایت محفوظ است.</p>
  </div>

  <hr>

  <div class="footer-bottom">
    <img src="IMG_5046.gif" alt="لوگو" class="footer-logo">
   
<p class="credit"> <strong>Worked By Amin HemmatZadeh ©</strong></p>
  </div>
</footer>


<!-- اضافه کردن فونت آیکون‌ها -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">


  <!-- ===== مودال دسته‌بندی ===== -->
  <div id="catModal" class="category-modal" onclick="closeCategoryModal(event)">
    <div class="inner" onclick="event.stopPropagation()">
      <button class="modal-x" onclick="closeCategoryModal()">×</button>
      <h2 id="catTitle">محصولات</h2>
      <div id="catProducts" class="category-products"></div>
      <button class="cat-close" onclick="closeCategoryModal()">بستن</button>
    </div>
  </div>

  <!-- ===== مودال محصول ===== -->
  <div id="productModal" class="product-modal" onclick="closeProductModal(event)">
    <div class="inner" onclick="event.stopPropagation()">
      <button class="modal-x" onclick="closeProductModal()">×</button>
      <img id="prodImg" src="" alt="">
      <h3 id="prodName"></h3>
      <div id="prodPrice" class="price"></div>
      <div id="prodDesc" class="desc"></div>
      <button class="add-cart" onclick="addToCart()">🛒 افزودن به سبد خرید</button>
    </div>
  </div>

  <!-- ===== صفحه/اُورلی سبد خرید ===== -->
  <div id="cartOv" class="overlay" onclick="closeCartOverlay(event)">
    <div class="modal" onclick="event.stopPropagation()">
      <button class="modal-x" onclick="closeCartOverlay()">×</button>
      <h3>سبد خرید</h3>
      <div id="cartList" class="cart-list"></div>
      <div class="cart-footer">
        <div class="cart-total">مجموع: <b id="cartTotal">0</b> تومان</div>
        <button class="btn" onclick="openCheckout()">تکمیل خرید</button>
        <button class="btn" style="background:#1a1a1a;border:1px solid #2a2a2a" onclick="clearCart()">خالی کردن سبد</button>
      </div>
    </div>
  </div>

  <!-- ===== ویزارد تکمیل خرید ===== -->
  <div id="checkoutOv" class="overlay" onclick="closeCheckout(event)">
    <div class="modal" onclick="event.stopPropagation()">
      <button class="modal-x" onclick="closeCheckout()">×</button>
      <h3 style="margin-bottom:6px">تکمیل خرید</h3>
      <div class="steps">
        <div id="dot1" class="step-dot">۱) خلاصه</div>
        <div id="dot2" class="step-dot">۲) اطلاعات</div>
        <div id="dot3" class="step-dot">۳) ارسال/پرداخت</div>
        <div id="dot4" class="step-dot">۴) تأیید</div>
      </div>

      <!-- Step 1 -->
      <div id="step1" class="step visible">
        <div id="coSummary" class="cart-list"></div>
        <div class="cart-total">جمع کل: <b id="coTotal">0</b> تومان</div>
        <div class="step-actions">
          <button class="btn" style="background:#1a1a1a;border:1px solid #2a2a2a" onclick="closeCheckout()">بستن</button>
          <button class="btn" onclick="gotoStep(2)">مرحله بعد</button>
        </div>
      </div>

      <!-- Step 2 -->
      <div id="step2" class="step">
        <div class="row">
          <div class="field"><input id="fName" placeholder="نام و نام خانوادگی" aria-label="نام و نام خانوادگی"></div>
          <div class="field"><input id="fPhone" type="tel" placeholder="شماره موبایل (مثلاً 09xxxxxxxxx)" aria-label="شماره موبایل"></div>
        </div>
        <div class="field"><input id="fCity" placeholder="شهر (مثلاً تهران)" aria-label="شهر"></div>
        <div class="field"><textarea id="fAddr" rows="3" placeholder="آدرس کامل" aria-label="آدرس کامل"></textarea></div>
        <div class="row">
          <div class="field"><input id="fPostal" placeholder="کد پستی" aria-label="کد پستی"></div>
          <div class="field"><input id="fNote" placeholder="یادداشت (اختیاری)" aria-label="یادداشت"></div>
        </div>
        <div class="step-actions">
          <button class="btn" style="background:#1a1a1a;border:1px solid #2a2a2a" onclick="gotoStep(1)">مرحله قبل</button>
          <button class="btn" onclick="gotoStep(3)">مرحله بعد</button>
        </div>
      </div>

      <!-- Step 3 -->
      <div id="step3" class="step">
        <div class="radio-group">
          <div class="muted">روش ارسال</div>
          <label class="radio-item">
            <input type="radio" name="ship" value="express" checked onchange="updateShipping()"> پست اکسپرس (۶۵,۰۰۰ تومان)
          </label>
          <label class="radio-item">
            <input type="radio" name="ship" value="standard" onchange="updateShipping()"> پست معمولی (رایگان)
          </label>
        </div>
        <div class="radio-group" style="margin-top:8px">
          <div class="muted">روش پرداخت</div>
          <label class="radio-item">
            <input type="radio" name="pay" value="online" checked> آنلاین
          </label>
          <label class="radio-item">
            <input type="radio" name="pay" value="cod"> پرداخت در محل
          </label>
        </div>

        <div class="cart-total" style="margin-top:10px">
          مبلغ کالاها: <b id="sumProducts">0</b> تومان<br>
          هزینه ارسال: <b id="sumShipping">0</b> تومان<br>
          مبلغ نهایی: <b id="sumFinal">0</b> تومان
        </div>

        <div class="step-actions">
          <button class="btn" style="background:#1a1a1a;border:1px solid #2a2a2a" onclick="gotoStep(2)">مرحله قبل</button>
          <button class="btn" onclick="placeOrder()">ثبت سفارش</button>
        </div>
      </div>

      <!-- Step 4 -->
      <div id="step4" class="step" style="text-align:center">
        <h3>سفارش با موفقیت ثبت شد ✅</h3>
        <p class="muted">کد پیگیری: <b id="orderCode"></b><br>به‌زودی با شما تماس می‌گیریم.</p>
        <button class="btn" onclick="closeCheckout()">بستن</button>
      </div>
    </div>
  </div>

  <script>
    /* === آیدی اینستاگرام را فقط اینجا عوض کن === */
    const INSTAGRAM_ID = '@Amin.hemmatzadeh';

    /* === state جستجو === */
    let SEARCH_QUERY = '';

    /* === منوی همبرگری === */
    function toggleMenu(){
      const m = document.getElementById('menu');
      const willOpen = m.style.display !== 'block';
      m.style.display = willOpen ? 'block' : 'none';
    }
    function closeMenu(){ const m = document.getElementById('menu'); if(m) m.style.display='none'; }

    /* === زیرمنوی تماس با ما === */
    function toggleContact(){
      const s = document.getElementById('contactSub');
      const expanded = s.style.display==='block';
      s.style.display = expanded ? 'none' : 'block';
    }

    /* === شیت دسته‌بندی پایین === */
    function toggleSheet(){
      const s = document.getElementById('sheet');
      s.style.display = (s.style.display==='block') ? 'none' : 'block';
    }
    function openCatFromSheet(cat){
      toggleSheet();
      openCategory(cat);
    }
    function scrollToEl(id){
      toggleSheet();
      const el = document.getElementById(id);
      if(el) el.scrollIntoView({behavior:'smooth', block:'center'});
    }

    /* === جستجو === */
    function toggleSearch(){
      const o = document.getElementById('searchOv');
      o.style.display = 'flex';
      setTimeout(()=>document.getElementById('searchQuery').focus(), 50);
    }
    function closeSearch(e){
      const ov = document.getElementById('searchOv');
      if(!e || e.target===ov) ov.style.display='none';
    }
    function applySearch(){
      const val = (document.getElementById('searchQuery').value || '').trim();
      SEARCH_QUERY = val;
      closeSearch();
      openStore(); // فروشگاه را با فیلتر باز کن
    }
    /* === حساب کاربری === */
    function openAccount(){ document.getElementById('accountOv').style.display='flex'; }
    function closeAccount(e){
      const ov = document.getElementById('accountOv');
      if(!e || e.target===ov) ov.style.display='none';
    }
/* [GPT PATCH] ورود با OTP و گوگل (دمو) */
function sendOTP(){
  const phone = (document.getElementById('accPhone')?.value || '').trim();
  if(!/^09\d{9}$/.test(phone)){
    alert('شماره موبایل معتبر نیست (مثلاً 09123456789).');
    return;
  }
  alert('کد یکبار مصرف برای ' + phone + ' ارسال شد ✅');
}

function loginWithGoogle(){
  alert('ورود با Google  ✅');
  // در آینده اینجا می‌تونی به OAuth گوگل وصلش کنی
}
/* [GPT PATCH] مدیریت OTP شیک */
let otpCountdown, otpTime = 120;

function sendOTP(){
  const phone = (document.getElementById('accPhone')?.value || '').trim();
  if(!/^09\d{9}$/.test(phone)){
    alert('شماره موبایل معتبر نیست (مثلاً 09123456789).');
    return;
  }
  alert('کد یکبار مصرف برای ' + phone + ' ارسال شد ✅');

  document.getElementById("otpSection").style.display = "block";

  // ریست باکس‌های OTP
  document.querySelectorAll(".otp-input").forEach(inp => inp.value = "");
  document.querySelector(".otp-input").focus();

  // شروع تایمر
  otpTime = 120;
  clearInterval(otpCountdown);
  updateTimer();
  otpCountdown = setInterval(updateTimer, 1000);
}

function updateTimer(){
  const timerEl = document.getElementById("otpTimer");
  if(otpTime <= 0){
    clearInterval(otpCountdown);
    timerEl.innerHTML = "⏳ زمان منقضی شد. <span style='color:#0af; cursor:pointer;' onclick='sendOTP()'>ارسال مجدد</span>";
    return;
  }
  const min = String(Math.floor(otpTime / 60)).padStart(2,'0');
  const sec = String(otpTime % 60).padStart(2,'0');
  timerEl.innerHTML = `⌛ ${min}:${sec}`;
  otpTime--;
}

function moveNext(el, index){
  if(el.value.length === 1 && index < 5){
    el.nextElementSibling.focus();
  }
}

function verifyOTP(){
  let code = "";
  document.querySelectorAll(".otp-input").forEach(inp => code += inp.value);
  if(code.length !== 6 || !/^\d+$/.test(code)){
    alert("کد باید ۶ رقم باشد.");
    return;
  }
  alert("کد " + code + " تأیید شد ✅ (نسخه نمایشی)");
  clearInterval(otpCountdown);
  document.getElementById("otpTimer").innerHTML = "";
}



    /* === دیتابیس ساده محصولات (Mock Data) === */
    const DB = {
      apple: [
        {id:'a1', name:"AirPods Pro",            price:"11,500,000", image:"IMG_5217.jpeg", desc:"ایرپاد پرو (نسل ۱) با ANC."},
        {id:'a2', name:"AirPods Pro (2nd Gen)",  price:"23,000,000", image:"IMG_5218.jpeg", desc:"نسل ۲ با ANC بهتر و کیس USB-C."},
        {id:'a3', name:"AirPods (3rd Gen)",      price:"9,500,000",  image:"IMG_5220.jpeg", desc:"صدای فراگیر و طراحی جدید."},
        {id:'a4', name:"AirPods (4th Gen)",      price:"11,000,000", image:"IMG_5221.jpeg", desc:"کیفیت بالا با ANC قدرتمند."},
        {id:'a5', name:"AirPods Max",            price:"42,100,000",  image:"IMG_5223.jpeg", desc:"هدفون روگوشی با کیفیت استودیویی."}
      ],
      samsung: [
        {id:'s1', name:"Galaxy Buds Pro",   price:"4,500,000",  image:"IMG_5010.jpeg", desc:"صدای 24bit Hi-Fi و ANC قوی."},
        {id:'s2', name:"Galaxy Buds 3",     price:"7,500,000",  image:"IMG_5011.jpeg", desc:"سبک، راحت، مناسب استفاده روزانه."},
        {id:'s3', name:"Galaxy Buds 3 Pro", price:"20,500,000", image:"IMG_5012.jpeg", desc:"صدای متعادل و میکروفون‌های قوی."},
        {id:'s4', name:"Galaxy Buds Live",  price:"5,200,000",  image:"IMG_5013.jpeg", desc:"طراحی خاص لوبیایی، مناسب مکالمه."},
        {id:'s5', name:"Galaxy Buds FE",    price:"3,500,000",  image:"IMG_5014.jpeg", desc:"اقتصادی با ویژگی‌های کاربردی."}
      ],
      xiaomi: [
        {id:'x1', name:"Redmi Buds 6 lite", price:"3,100,000", image:"IMG_5040.jpeg", desc:"ANC سبک و باتری خوب."},
        {id:'x2', name:"Redmi Buds 6 Pro",  price:"6,250,000", image:"IMG_5041.jpeg", desc:"درایور دوگانه و طراحی مدرن."},
        {id:'x3', name:"Redmi Buds 5 Pro",  price:"4,250,000", image:"IMG_5042.jpeg", desc:"دو اتصال همزمان و کیفیت مناسب."},
        {id:'x4', name:"Xiaomi Buds 6",     price:"3,700,000", image:"IMG_5043.jpeg", desc:"طراحی راحت و صدای شفاف."},
        {id:'x5', name:"Redmi Airdots",     price:"900,000",   image:"IMG_5044.jpeg", desc:"مدل اقتصادی محبوب برای استفاده روزانه."}
      ],
      gaming: [
        {id:'g1', name:"Marshall Motif II",     price:"13,400,000", image:"IMG_5050.jpeg", desc:"مود گیمینگ با تاخیر کم و RGB."},
        {id:'g2', name:"CMF Buds Pro 2",        price:"9,200,000",  image:"IMG_5054.jpeg", desc:"دوام باتری خوب و صدای قوی."},
        {id:'g3', name:"BlackShark Lucifer",     price:"7,000,000",  image:"IMG_5052.jpeg", desc:"اقتصادی با مود گیمینگ."},
        {id:'g4', name:"Lenovo XT90",            price:"11,000,000", image:"IMG_5053.jpeg", desc:"سبک و مناسب بازی‌های موبایل."},
        {id:'g5', name:"Marshall Minor IV",      price:"11,000,000", image:"IMG_5051.jpeg", desc:"تاخیر پایین و طراحی خفن."}
      ]
    };

    /* === ابزارها: سبد خرید === */
    function getCart(){ return JSON.parse(localStorage.getItem('cart') || '[]'); }
    function setCart(arr){ localStorage.setItem('cart', JSON.stringify(arr)); }
    function parsePrice(str){ return parseInt(String(str).replace(/[^\d]/g,'')) || 0; }
    function formatNum(n){ return (n||0).toLocaleString('fa-IR'); }

    function updateBadge(){
      const cart = getCart();
      const count = cart.reduce((acc,it)=> acc + (it.qty||1), 0);
      const badge = document.getElementById('cartCount');
      if(!badge) return;
  if(count > 0){
  badge.textContent = count;
}else{
  badge.textContent = 0;  // ✅ همیشه 0 نشون بده
}
    }

    /* === کمکی: لیست همه محصولات === */
    function getAllProducts(){
      return [...DB.apple, ...DB.samsung, ...DB.xiaomi, ...DB.gaming];
    }

    /* === نمایش فروشگاه (فیلتر بر اساس سرچ) === */
    function openStore(){
      closeMenu();
      const ov = document.getElementById('storeOv');
      const grid = document.getElementById('storeGrid');
      const info = document.getElementById('storeInfo');

      grid.innerHTML = '';
      let items = getAllProducts();

      const q = (SEARCH_QUERY || '').toLowerCase();
      if(q){
        items = items.filter(p => (p.name || '').toLowerCase().includes(q));
        info.textContent = `${items.length} نتیجه برای «${SEARCH_QUERY}»`;
      }else{
        info.textContent = `همه محصولات (${items.length})`;
      }

      if(items.length === 0){
        grid.innerHTML = `<div class="notice" style="grid-column:1/-1">محصولی با این جستجو پیدا نشد.</div>`;
      }else{
        items.forEach(p=>{
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <button class="mini-add" title="افزودن سریع" onclick="addToCartQuick('${p.id}')">+</button>
            <img src="${p.image}" alt="${p.name}" loading="lazy">
            <div class="name" style="color:var(--text); margin-top:6px">${p.name}</div>
            <div class="price">${p.price} تومان</div>
          `;
          card.onclick = (e)=>{ if(!e.target.classList.contains('mini-add')) openProduct(p); };
          grid.appendChild(card);
        });
      }
      ov.style.display='flex';
    }
    function closeStore(e){
      const ov = document.getElementById('storeOv');
      if(!e || e.target===ov) ov.style.display='none';
    }

    /* === افزودن به سبد: مودال و سریع === */
    let currentProduct = null;

    function addProductToCart(p){
      if(!p) return;
      const cart = getCart();
      const idx = cart.findIndex(it=> it.id === p.id);
      if(idx>-1){
        cart[idx].qty = (cart[idx].qty||1) + 1;
      }else{
        cart.push({...p, qty:1});
      }
      setCart(cart);
      updateBadge();
      const live = document.getElementById('live');
      if(live) live.textContent = `${p.name} به سبد اضافه شد`;
    }

    function addToCart(){            /* دکمه داخل مودال محصول */
      if(!currentProduct) return;
      addProductToCart(currentProduct);
      alert("محصول به سبد خرید اضافه شد ✅");
    }

    function addToCartQuick(id){     /* دکمه ➕ در فروشگاه */
      const p = getAllProducts().find(x=> x.id===id);
      addProductToCart(p);
      alert("محصول به سبد خرید اضافه شد ✅");
    }

    /* === مودال دسته‌بندی === */
    function openCategory(cat){
      const modal = document.getElementById("catModal");
      const title = document.getElementById("catTitle");
      const list  = document.getElementById("catProducts");

      const names = {
        apple:"ایرپادهای اپل",
        samsung:"ایرپادهای سامسونگ",
        xiaomi:"ایرپادهای شیائومی",
        gaming:"ایرپادهای گیمینگ"
      };

      title.textContent = names[cat] || "محصولات";
      list.innerHTML = "";

      const data = DB[cat] || [];
      data.slice(0, 50).forEach(p=>{
        const card = document.createElement("div");
        card.className="card";
        card.innerHTML = `
          <img src="${p.image}" alt="${p.name}" loading="lazy">
          <div>${p.name}</div>
          <div class="price">${p.price} تومان</div>
        `;
        card.onclick = ()=>openProduct(p);
        list.appendChild(card);
      });

      modal.style.display="flex";
    }
    function closeCategoryModal(e){
      const modal = document.getElementById("catModal");
      if(!e || e.target===modal) modal.style.display="none";
    }

    /* === مودال محصول === */
    function openProduct(p){
      currentProduct = p;
      document.getElementById("prodImg").src = p.image;
      document.getElementById("prodImg").alt = p.name;
      document.getElementById("prodName").textContent = p.name;
      document.getElementById("prodPrice").textContent = p.price + " تومان";
      document.getElementById("prodDesc").textContent = p.desc || "";
      document.getElementById("productModal").style.display="flex";
    }
    function closeProductModal(e){
      const modal = document.getElementById("productModal");
      if(!e || e.target===modal) modal.style.display="none";
    }

    /* ====== صفحهٔ سبد خرید ====== */
    function openCart(){
      closeMenu();
      closeCategoryModal();
      closeProductModal();
      closeStore(); /* در صورت باز بودن فروشگاه */
      renderCart();
      document.getElementById('cartOv').style.display='flex';
    }
    function closeCartOverlay(e){
      const ov = document.getElementById('cartOv');
      if(!e || e.target===ov) ov.style.display='none';
    }

    function renderCart(){
      const list = document.getElementById('cartList');
      const totalEl = document.getElementById('cartTotal');
      const cart = getCart();
      list.innerHTML = '';

      if(cart.length===0){
        list.innerHTML = `<div class="notice" style="margin:0">سبد خرید شما خالی است.</div>`;
        totalEl.textContent = '0';
        updateBadge();
        return;
      }

      let sum = 0;
      cart.forEach(item=>{
        const priceNum = parsePrice(item.price);
        sum += priceNum * (item.qty||1);

        const row = document.createElement('div');
        row.className = 'cart-item';
        row.innerHTML = `
          <img class="cart-thumb" src="${item.image}" alt="${item.name}" loading="lazy">
          <div class="ci-main">
            <div class="ci-name">${item.name}</div>
            <div class="ci-price">${formatNum(priceNum)} تومان</div>
            <div class="ci-qty">
              <button class="qty-btn" onclick="changeQty('${item.id}', -1)">−</button>
              <span id="qty-${item.id}">${item.qty||1}</span>
              <button class="qty-btn" onclick="changeQty('${item.id}', 1)">+</button>
            </div>
          </div>
          <button class="remove-btn" onclick="removeFromCart('${item.id}')">حذف</button>
        `;
        list.appendChild(row);
      });

      totalEl.textContent = formatNum(sum);
      updateBadge();
    }

    function changeQty(id, delta){
      const cart = getCart();
      const idx = cart.findIndex(it=> it.id===id);
      if(idx===-1) return;
      const q = (cart[idx].qty||1) + delta;
      if(q<=0){
        cart.splice(idx,1);
      }else{
        cart[idx].qty = q;
      }
      setCart(cart);
      renderCart();
    }

    function removeFromCart(id){
      const cart = getCart().filter(it=> it.id!==id);
      setCart(cart);
      renderCart();
    }

    function clearCart(){
      if(!confirm('کل سبد خرید پاک شود؟')) return;
      setCart([]);
      renderCart();
    }

    /* ====== Checkout Wizard ====== */
    const SHIP_PRICES = { express: 65000, standard: 0 };

    function openCheckout(){
      const cart = getCart();
      if(cart.length===0){ alert('سبد خرید خالی است.'); return; }
      renderCheckoutSummary();
      document.getElementById('checkoutOv').style.display='flex';
      gotoStep(1);
    }
    function closeCheckout(e){
      const ov = document.getElementById('checkoutOv');
      if(!e || e.target===ov){ ov.style.display='none'; }
    }

    function gotoStep(n){
      [1,2,3,4].forEach(i=>{
        document.getElementById('step'+i).classList.remove('visible');
        document.getElementById('dot'+i).classList.remove('active');
      });
      document.getElementById('step'+n).classList.add('visible');
      document.getElementById('dot'+n).classList.add('active');
      if(n===3){ updateShipping(); }
    }

    function renderCheckoutSummary(){
      const wrap = document.getElementById('coSummary');
      const totalEl = document.getElementById('coTotal');
      wrap.innerHTML='';
      const cart = getCart();
      let sum=0;
      cart.forEach(it=>{
        const price = parsePrice(it.price);
        sum += price*(it.qty||1);
        const row = document.createElement('div');
        row.className = 'cart-item';
        row.innerHTML = `
          <img class="cart-thumb" src="${it.image}" alt="${it.name}" loading="lazy">
          <div class="ci-main">
            <div class="ci-name">${it.name}</div>
            <div class="ci-price">${formatNum(price)} × ${it.qty||1} تومان</div>
          </div>
        `;
        wrap.appendChild(row);
      });
      totalEl.textContent = formatNum(sum);
      document.getElementById('sumProducts').textContent = formatNum(sum);
    }

    function getSelectedShip(){
      const el = document.querySelector('input[name="ship"]:checked');
      return el ? el.value : 'express';
    }
    function updateShipping(){
      const sumProducts = parseInt(String(document.getElementById('sumProducts').textContent).replace(/[^\d]/g,'')) || 0;
      const ship = getSelectedShip();
      const shipCost = SHIP_PRICES[ship] || 0;
      document.getElementById('sumShipping').textContent = (shipCost).toLocaleString('fa-IR');
      document.getElementById('sumFinal').textContent = (sumProducts + shipCost).toLocaleString('fa-IR');
    }

    function placeOrder(){
      const name = document.getElementById('fName').value.trim();
      const phone = document.getElementById('fPhone').value.trim();
      const addr = document.getElementById('fAddr').value.trim();
      if(!name || !phone || !addr){
        alert('نام، موبایل و آدرس الزامی هستند.');
        gotoStep(2);
        return;
      }
      if(!/^09\d{9}$/.test(phone)){
        alert('فرمت شماره موبایل صحیح نیست (مثلاً 09123456789).');
        gotoStep(2);
        return;
      }
      const code = 'HZ-' + Math.random().toString(36).slice(2,8).toUpperCase();
      document.getElementById('orderCode').textContent = code;

      setCart([]);
      updateBadge();
      document.getElementById('cartOv').style.display='none';

      gotoStep(4);
    }

    /* قبلی: fakeCheckout -> حذف و هدایت به ویزارد */
    function fakeCheckout(){ openCheckout(); }

    /* ====== بستن منو با کلیک بیرون ====== */
    document.addEventListener('click', (e)=>{
      const menu = document.getElementById('menu');
      if(menu && !menu.contains(e.target) && !e.target.closest('.icon-btn')) {
        menu.style.display='none';
      }
    });

    /* ====== بستن با ESC (همه مودال‌ها) ====== */
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape'){
        closeMenu();
        const s = document.getElementById('sheet');
        if(s) s.style.display='none';
        const so = document.getElementById('searchOv');
        if(so) so.style.display='none';
        const ao = document.getElementById('accountOv');
        if(ao) ao.style.display='none';
        closeCategoryModal();
        closeProductModal();
        closeCartOverlay();
        closeStore();
        closeCheckout();
      }
    });

    /* ====== شروع ====== */
    document.addEventListener('DOMContentLoaded', ()=>{
      updateBadge();
      const ig =  document.getElementById('igLink');
      if(ig){
        const id = String(INSTAGRAM_ID || '').replace(/^@/, '');
        ig.href = `https://instagram.com/${id}`;
        ig.textContent = `📷 اینستاگرام (@${id})`;
      }
    });
/* === درباره ما === */
document.addEventListener("DOMContentLoaded", () => {
  const aboutModal = document.getElementById("aboutModal");
  const openAbout = document.getElementById("openAbout");
  const closeAbout = document.getElementById("closeAbout");

  if (openAbout && aboutModal) {
    openAbout.addEventListener("click", () => {
      aboutModal.style.display = "flex";
    });
  }

  if (closeAbout && aboutModal) {
    closeAbout.addEventListener("click", () => {
      aboutModal.style.display = "none";
    });
  }

  // بستن با کلیک بیرون
  window.addEventListener("click", (e) => {
    if (e.target === aboutModal) {
      aboutModal.style.display = "none";
    }
  });
});

/* === گرید «همه محصولات» (خودکار، با قیمت و قابل کلیک) === */
(function(){
  let allProducts = [];
  let productIndex = 0;
  const INTERVAL_MS = 4000; // هر چند میلی‌ثانیه یک بار کارت‌ها عوض شوند

  // ساخت ۴ کارت استاندارد (تصویر + نام + قیمت)
  function buildGrid(){
    const grid = document.querySelector(".grid");
    if(!grid) return;
    grid.innerHTML = "";
    for(let i=0; i<4; i++){
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="" alt="" loading="lazy">
        <div class="prod-name" style="margin-top:6px"></div>
        <div class="price"></div>
      `;
      grid.appendChild(card);
    }
  }

  // یک مرحله جابجایی همه کارت‌ها (با افکت)
  function cycleProducts(){
    const cards = document.querySelectorAll(".grid .card");
    if(cards.length === 0 || allProducts.length === 0) return;

    cards.forEach((card, i) => {
      const prod = allProducts[(productIndex + i) % allProducts.length];
      const img = card.querySelector("img");
      const nameEl = card.querySelector(".prod-name");
      const priceEl = card.querySelector(".price");

      // fade-out
      card.classList.add("fade");

      // بعد از محو شدن، محتوا رو عوض کن و fade-in
      setTimeout(() => {
        img.src = prod.image;
        img.alt = prod.name;
        nameEl.textContent = prod.name;
        priceEl.textContent = prod.price + " تومان";

        // کلیک روی کارت → مودال محصول
        card.onclick = () => openProduct(prod);

        card.classList.remove("fade");
      }, 600);
    });

    productIndex = (productIndex + cards.length) % allProducts.length;
  }

  // شروع کار بعد از لود صفحه
  document.addEventListener("DOMContentLoaded", () => {
    try{
      // تابع getAllProducts و آبجکت DB از کد فعلی تو موجوده
      allProducts = (typeof getAllProducts === "function") ? getAllProducts() : [];
    }catch(e){
      allProducts = [];
    }

    buildGrid();     // ساخت ۴ کارت اولیه
    cycleProducts(); // همین الان یکبار پرشون کن
    setInterval(cycleProducts, INTERVAL_MS); // سپس هر چند ثانیه تکرار
  });
})();

/* === محصولات منتخب (از دیتابیس) === */
document.addEventListener("DOMContentLoaded", () => {
  const slider = document.getElementById("products");
  if(!slider) return;

  // می‌تونی اینجا انتخاب کنی چه محصولاتی نشون داده بشن
  // مثلا 4 تای اول از دیتابیس اپل:
  const featured = DB.apple.slice(0,4);

  // یا اگر می‌خوای تصادفی باشه:
  // const all = getAllProducts();
  // const featured = all.sort(() => 0.5 - Math.random()).slice(0,4);

  slider.innerHTML = "";
  featured.forEach(prod => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${prod.image}" alt="${prod.name}" loading="lazy">
      <div class="prod-name" style="margin-top:6px">${prod.name}</div>
      <div class="price">${prod.price} تومان</div>
    `;
    card.onclick = () => openProduct(prod);
    slider.appendChild(card);
  });
});

</script>

 
<!-- === مودال درباره ما === -->
<div id="aboutModal" class="overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); justify-content:center; align-items:center; z-index:9999;">
  <div style="background:#fff; max-width:600px; padding:20px; border-radius:12px; text-align:center; direction:rtl;">
    <h2 style="margin-bottom:15px;">درباره ما</h2>
    <p style="line-height:1.8; color:#333;">
      امروز ، چهارمِ شهریورِ سال 1404/2025 هستیم و من این سایت رو به عنوان اولین طراحی خودم به یادگار میذارم .
      از آخر مرداد ماه طراحیش رو شروع کردم و کم کم داره تموم  میشه ، قراره یاد بگیرم که چه جور Host بخرم و کدم رو لینک کنم.البته الان اگه داری این پیامو میخونی یعنی من یاد گرفتم .  :|  
 زمان تقریبی برای ایده ، طراحی و ساخت : ۵ تا ۷ روز
      
    </p>
    <button id="closeAbout" style="margin-top:20px; padding:8px 16px; background:#222; color:#fff; border:none; border-radius:6px; cursor:pointer;">بستن</button>
  </div>
</div>

</body>
</html>
